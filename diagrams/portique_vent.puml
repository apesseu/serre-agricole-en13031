@startuml
!theme aws-orange

title
  <size:16><b>Algorithme de Dimensionnement Portique Bi-versant</b></size>
  <size:14>EN 13031 (Annexe B) + EN 1991-1-4</size>
  <size:12>(Actions du vent)</size>
end title

start

:Données d'entrée du projet;
note right
  **Géométrie portique:**
  * Longueur L (m)
  * Largeur B (m)
  * Hauteur faîtage Hf (m)
  * Hauteur rives Hr (m)
  * Angle pente alpha (°)

  **Localisation:**
  * Zone climatique
  * Altitude (m)
  * Rugosité terrain
  * Classe de serre
end note

:Déterminer le référentiel normatif applicable;

if (20° ≤ α ≤ 30 ?) then (oui)
  :Application prioritaire EN 13031;
  note right
    [[https://eurocodes.com/en13031-1 EN 13031-1 Structures de serre]]
  end note
else (non)
  :Application EN 1991-1-4;
  note right
    [[https://lc.cx/cnN2yh EN 1991-1-4 Actions vent]]
    [[https://www.google.fr/ EN 13031-1 Annexe C (neige)]]
  end note
endif

partition "**CARACTERISTIQUES CLIMATIQUES**" {
  :Déterminer vitesse de référence vb,0;
  note right
    **NF EN 13031-1:2019** [[https://www.google.fr § 10.2.2.1(3)]]
    **EN 1991-1-4:** [[https://lc.cx/cnN2yh#page=3 § 2.1 du guide CTICM]]
  end note
  
  :Calculer facteurs climatiques;
  note left
    • Facteur directionnel Cdir  
    • Facteur saisonnier Cseason  
    • Facteur probabilité Cprob
  end note
  
  :Déterminer charge neige caractéristique sk;
  note right
    **EN 13031-1:2019** [[https://www.google.fr § 10.2.2.2 (2)]]  
    **EN 1991-1-3:** [[https://lc.cx/WKUvS6#page=3 § 2 du guide CTICM]]
  end note
}

partition "**CALCUL PRESSION DYNAMIQUE**" {
  :Calculer le coefficient d’ajustement cprob;
  note right
    **NF EN 13031-1/NA2020:** [[https://www.google.fr §10.2.2.1 (3)]]
  end note

  :Déterminer rugosité terrain z0, zmin;
  note right
    **NF EN 13031-1/NA2020:** [[https://www.google.fr Tableau 6]]
  end note
  
  :Calculer Vitesse de référence vb = cprob × cdir × cseason × vb,0;
  note right: [[https://lc.cx/cnN2yh#page=3 §2.1 du guide CTICM]]

  :Calculer coefficient de rugosité cr(z);
  note right: **EN 1991-1-4:2005** [[https://lc.cx/Q0tgGE#page=21 §4.3.2]]

  :Calculer coefficient de topographie co(z);
  note right: [[https://lc.cx/cnN2yh#page=4 §2.2.2.1 du guide CTICM]]

  :Calculer le vent moyen vm(z) = cr(z) × co(z) × vb;
  note right: [[https://lc.cx/cnN2yh#page=4 §2.2 du guide CTICM]]

  :Calculer l’intensité de la turbulence Iv(z) = kI / (co(z) × ln(z/z0));
  note right: [[https://lc.cx/cnN2yh#page=11 §2.3 du guide CTICM]]

  :Calculer la pression dynamique de pointe qp(z) = 0.5 × ρ × vm(z)² × (1 + 7·Iv(z));
  note right: [[https://lc.cx/cnN2yh#page=12 §2.4 du guide CTICM]]
}

partition "**DETERMINATION ZONES TOITURE**" {
  :Mesurer angle toiture α;
  :Déterminer direction du vent;
  note right
    0° = vent ⟂ faîtage  
    90° = vent ∥ faîtage
  end note
  
  if (20° ≤ α ≤ 30°) then (EN 13031-1 applicable)
    partition "**SERRE EN 13031‑1 (20°–30°)**" {
      :Déterminer si mono‑chapelle ou multi‑chapelle;
      if (Direction vent = 0°) then (⟂ faîtage)
        :Zones A, B selon Tableau B.1;
        if (Multi-chapelle ?) then (oui)
          :+ Zones C, D (2ème chapelle);
          :+ Zones E, F (3ème à dernière);
          note right: Coefficient frottement cfr,1 = 0,03 tan(α)
        endif
      else (∥ faîtage - 90°)
        :Zones G;
      endif
    }
  else (EN 13031-1 non applicable)
    partition "**EUROCODE EN 1991‑1‑4 (autres α)**" {
      if (α ≤ 5°) then (plate)
        :Zones F, G, H, I;
        note right: **EN 1991-1-4:2005** [[https://lc.cx/Q0tgGE#page=36 §7.2.2]]
      elseif (5° < α ≤ 15°) then (faible)
        if (Direction = 0°) then (⟂ faîtage)
          :Zones F, G, H + I, J;
          note right: **EN 1991-1-4:2005** [[https://lc.cx/Q0tgGE#page=39 §7.2.3]]
        else (∥ faîtage)
          :Zones F, G, H;
        endif
        note right: **EN 1991-1-4:2005** [[https://lc.cx/Q0tgGE#page=47 Tableau 7.4a]]
      elseif (15° < α < 20°) then (moyenne basse)
        :Zones F, G, H, I, J;
        note right: Tableau 7.4a EN 1991‑1‑4
      else (30° < α ≤ 45°) then (moyenne haute)
        :Zones F, G, H, I, J;
        note right: Tableau 7.4a/7.4b EN 1991‑1‑4
      
      
      endif
    }
  endif
}

partition "**DETERMINATION ZONES FACADES**" {
  if (Direction vent = 0°) then (⟂ faîtage)
    :Zones K, M1, M2, M3, L;
    note right
      **NF EN 13031-1:2019** [[https://www.google.fr Figure B.2]]  
      m1 = 0,4h ≤ 0,2l  
      m2 = 2,0h ≤ 1,0l  
      h = 0,75H ≥ he
    end note
  else (∥ faîtage - 90°)
    :Zones O, N1, N2, N3, P;
    note right
      **NF EN 13031-1:2019** [[https://www.google.fr Figure B.2]]  
      n1 = 0,4h ≤ 0,2w  
      n2 = 2,0h ≤ 1,0w  
      h = 0,75H ≥ he
    end note
  endif
}

partition "**CALCUL COEFFICIENTS PRESSION EXTERNE**" {
  if (Zone couverte par EN 13031 ?) then (oui)
    partition "**COEFFICIENTS EN 13031-1**" {
      if (Direction vent = 0°) then (⟂ faîtage)
        :Appliquer Tableau B.1;
        note right
          Zone A: +0,2 ou +0,3 selon précision Fig B.4  
          Zone B: selon α et ratios h/s, h/w  
          Zone C, D, E, F: voir Tableau B.1  
          Interpolation linéaire autorisée
        end note
      else (90°)
        :Appliquer coefficients du tableau;
        note right
          M1/N1: -1,0 | M2/N2: -0,7 | M3/N3: -0,5  
          O: +0,8 (h/l≥1) ou +0,7 (h/l≤0,25)  
          P: -0,5 (h/l≥1) ou -0,3 (h/l≤0,25)
        end note
      endif
    }
  else (Eurocode applicable)
    partition "**COEFFICIENTS EN 1991-1-4 (complément)**" {
      :Appliquer Tableaux 7.4a/7.4b selon α;
      if (Direction quelconque ?) then (oui)
        :Interpolation: Cpe(θ) = Cpe(0°)×cos²θ + Cpe(90°)×sin²θ;
      endif
      note right
        **Eurocode complète EN 13031 pour:**  
        • Angles hors 20°-30°
      end note
    }
  endif
}

partition "**CALCUL PRESSIONS NETTES**" {
  :Calculer pression nette sur toiture;
  note right
    **we = qp(ze) × (Cpe - Cpi)**  
    ze = hauteur référence toiture
  end note
  
  :Calculer pression nette parois;
  note right
    **we = qp(ze) × (Cpe - Cpi)**  
    ze = hauteur référence paroi
  end note
  
  :Vérifier pressions minimales;
  if (Référentiel ?) then (EN 13031)
    :we,min = 0.2 kN/m² (EN 13031);
    note right: [[https://eurocodes.com/en13031-1-5-6 Art 5.6]]
  else (EN 1991-1-4)
    :we,min selon catégorie;
    note right: [[https://eurocodes.com/en1991-1-4-5-2 Art 5.2]]
  endif
}

:Action du vent terminé;
note right
  Prochaine étape :
  **Calcul des charges de neige**
  Voir fichier `portique_neige.puml`
end note

@enduml


